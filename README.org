* Benj

Benj utility scripts

** R installation

Note that r-anndata must be installed for all unit tests to pass
#+BEGIN_SRC bash
## Install under current environment
make
#+END_SRC
** Python installation

#+BEGIN_SRC bash
pip install .
#+END_SRC
** Conda environments
Environments under [[conda/]] can be used. Mamba is recommended for environment creation because of the number of packages
*** rbenj
#+BEGIN_SRC bash
mamba env create --file=conda/rbenj.yml
R --slave -e 'devtools::install_github(c("GreenleafLab/ArchR", "lhe17/nebula"), ref="master", repos = BiocManager::repositories())'
make
#+END_SRC
*** pybenj
#+BEGIN_SRC bash
mamba env create --file=conda/pybenj.yml
pip install .
#+END_SRC
*** benj
#+BEGIN_SRC bash
mamba env create --file=conda/benj.yml
R --slave -e 'devtools::install_github(c("GreenleafLab/ArchR", "lhe17/nebula"), ref="master", repos = BiocManager::repositories())'
make
pip install .
#+END_SRC
* RNA integration/subtyping framework
#+BEGIN_SRC bash
  function integrate() {
      cls="$1"
      shift
      integrate_rna.py -i concatenated.h5ad \
		       -o "${cls}.h5ad" \
		       -t "${cls}/${cls}_clust.tsv.gz" \
		       -f "${cls}" \
		       -b "batch" \
		       -l "${cls}_clust" \
		       --hvg 5000 \
		       --dotplot Mbp Pdgfra Aif1 Gfap Flt1 Pdgfrb Syt1 Slc17a7 Gad1 \
		       "$@"
  }
  integrate overall
  integrate Exc -a ./overall_clust/overall_clust.tsv.gz --subset overall_clust=C1,C2,C3
  integrate Exc_L23 -a ./Exc_clust/Exc_clust.tsv.gz --subset Exc_clust=C0,C2,C3


#+END_SRC
* TODO Upgrades
1. heatmap legend size
2. repel
3. easy volcano plots
4. heatmap annotations
5. colorRamp2 log transform
6. easy manhattan plot
7. examples
